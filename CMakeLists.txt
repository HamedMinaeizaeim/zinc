
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(Cmgui_Tests)

# Unit Testing
ENABLE_TESTING()

# Find dependent packages
FIND_PACKAGE(GTest REQUIRED)
FIND_PACKAGE(Cmgui REQUIRED)

INCLUDE_DIRECTORIES(
	${GTEST_INCLUDE_DIRS}
        ${CMGUI_INCLUDE_DIRS}
	)

SET(API_TESTS)

SET(CURRENT_TEST Cmiss_field_module)
LIST(APPEND API_TESTS ${CURRENT_TEST})
SET(${CURRENT_TEST}_SRC
        ${CURRENT_TEST}/create_if.cpp
	)

FOREACH(DEF ${CMGUI_DEFINITIONS} ${PLATFORM_DEFS})
        ADD_DEFINITIONS(-D${DEF})
ENDFOREACH()
FOREACH( TEST ${API_TESTS} )
        ADD_EXECUTABLE(APITestEXE${TEST} ${${TEST}_SRC})
        TARGET_LINK_LIBRARIES(APITestEXE${TEST} ${GTEST_MAIN_LIBRARIES} ${GTEST_LIBRARIES} ${CMGUI_LIBRARIES})
        ADD_TEST(APITest_${TEST} APITestEXE${TEST})
#	SET_TARGET_PROPERTIES(APITestEXE${TEST} PROPERTIES  COMPILE_DEFINITIONS "APITest${TEST}" )
ENDFOREACH()

